<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1196" height="548pt" viewBox="0 0 897 548"><g id="graph1" class="graph" transform="scale(1 1) rotate(0) translate(4 544)"><title>AWS CloudFormation Sample Template WorkerRole: Create a multi-az, Auto Scaled worker that pulls command messages from a queue and execs the command. Each message contains a command/script to run, an input file location and an output location for the results. The application is Auto-Scaled based on the amount of work in the queue. **WARNING** This template creates one or more Amazon EC2 instances and an Amazon SQS queue. You will be billed for the AWS resources used if you create a stack from this template.</title><polygon fill="#fff" stroke="#fff" points="-4 5 -4 -544 894 -544 894 5 -4 5"/><g id="node1" class="node"><title>NotEnoughMessagesAlarm</title><polygon fill="none" stroke="#000" points="417 -108 217 -108 217 -72 417 -72 417 -108"/><text x="317" y="-86.4" font-family="Times Roman,serif" font-size="14" text-anchor="middle">NotEnoughMessagesAlarm</text></g><g id="node2" class="node"><title>WorkerUser</title><polygon fill="none" stroke="#000" points="497 -468 399 -468 399 -432 497 -432 497 -468"/><text x="448" y="-446.4" font-family="Times Roman,serif" font-size="14" text-anchor="middle">WorkerUser</text></g><g id="node6" class="node"><title>InputQueuePolicy</title><polygon fill="none" stroke="#000" points="138 -324 0 -324 0 -288 138 -288 138 -324"/><text x="69" y="-302.4" font-family="Times Roman,serif" font-size="14" text-anchor="middle">InputQueuePolicy</text></g><g id="edge40" class="edge"><title>WorkerUser-&gt;InputQueuePolicy</title><path fill="none" stroke="#000" d="M398.642,-438.136C388.54,-435.922 377.954,-433.756 368,-432 306.219,-421.103 134.102,-438.546 88,-396 71.2878,-380.577 67.2893,-354.463 67.0314,-334.325"/><polygon fill="#000" stroke="#000" points="70.534 -334.2 67.203 -324.143 63.535 -334.083 70.534 -334.2"/></g><g id="node11" class="node"><title>WorkerKeys</title><polygon fill="none" stroke="#000" points="509 -396 411 -396 411 -360 509 -360 509 -396"/><text x="460" y="-374.4" font-family="Times Roman,serif" font-size="14" text-anchor="middle">WorkerKeys</text></g><g id="edge52" class="edge"><title>WorkerUser-&gt;WorkerKeys</title><path fill="none" stroke="#000" d="M451.028,-431.831C452.312,-424.131 453.838,-414.974 455.264,-406.417"/><polygon fill="#000" stroke="#000" points="458.739 -406.853 456.931 -396.413 451.835 -405.702 458.739 -406.853"/></g><g id="node3" class="node"><title>WorkerScaleDownPolicy</title><polygon fill="none" stroke="#000" points="452 -180 270 -180 270 -144 452 -144 452 -180"/><text x="361" y="-158.4" font-family="Times Roman,serif" font-size="14" text-anchor="middle">WorkerScaleDownPolicy</text></g><g id="edge6" class="edge"><title>WorkerScaleDownPolicy-&gt;NotEnoughMessagesAlarm</title><path fill="none" stroke="#000" d="M349.897,-143.831C344.933,-135.708 338.978,-125.964 333.507,-117.012"/><polygon fill="#000" stroke="#000" points="336.454 -115.121 328.253 -108.413 330.481 -118.771 336.454 -115.121"/></g><g id="node4" class="node"><title>LaunchConfig</title><polygon fill="none" stroke="#000" points="515 -324 405 -324 405 -288 515 -288 515 -324"/><text x="460" y="-302.4" font-family="Times Roman,serif" font-size="14" text-anchor="middle">LaunchConfig</text></g><g id="node7" class="node"><title>WorkerGroup</title><polygon fill="none" stroke="#000" points="605 -252 495 -252 495 -216 605 -216 605 -252"/><text x="550" y="-230.4" font-family="Times Roman,serif" font-size="14" text-anchor="middle">WorkerGroup</text></g><g id="edge48" class="edge"><title>LaunchConfig-&gt;WorkerGroup</title><path fill="none" stroke="#000" d="M482.711,-287.831C493.796,-278.963 507.295,-268.164 519.285,-258.572"/><polygon fill="#000" stroke="#000" points="521.674 -261.143 527.296 -252.163 517.301 -255.677 521.674 -261.143"/></g><g id="node5" class="node"><title>TooManyMessagesAlarm</title><polygon fill="none" stroke="#000" points="629 -108 447 -108 447 -72 629 -72 629 -108"/><text x="538" y="-86.4" font-family="Times Roman,serif" font-size="14" text-anchor="middle">TooManyMessagesAlarm</text></g><g id="edge8" class="edge"><title>WorkerGroup-&gt;WorkerScaleDownPolicy</title><path fill="none" stroke="#000" d="M502.307,-215.831C476.693,-206.073 444.94,-193.977 418.026,-183.724"/><polygon fill="#000" stroke="#000" points="418.941 -180.327 408.35 -180.038 416.449 -186.869 418.941 -180.327"/></g><g id="node10" class="node"><title>WorkerScaleUpPolicy</title><polygon fill="none" stroke="#000" points="630 -180 470 -180 470 -144 630 -144 630 -180"/><text x="550" y="-158.4" font-family="Times Roman,serif" font-size="14" text-anchor="middle">WorkerScaleUpPolicy</text></g><g id="edge50" class="edge"><title>WorkerGroup-&gt;WorkerScaleUpPolicy</title><path fill="none" stroke="#000" d="M550,-215.831C550,-208.131 550,-198.974 550,-190.417"/><polygon fill="#000" stroke="#000" points="553.5 -190.413 550 -180.413 546.5 -190.413 553.5 -190.413"/></g><g id="node8" class="node"><title>InputQueue</title><polygon fill="none" stroke="#000" points="195 -396 97 -396 97 -360 195 -360 195 -396"/><text x="146" y="-374.4" font-family="Times Roman,serif" font-size="14" text-anchor="middle">InputQueue</text></g><g id="edge4" class="edge"><title>InputQueue-&gt;NotEnoughMessagesAlarm</title><path fill="none" stroke="#000" d="M159.416,-359.778C166.36,-349.655 174.508,-336.592 180,-324 213.099,-248.108 178.355,-210.26 228,-144 237.423,-131.423 250.713,-121.16 264.155,-113.09"/><polygon fill="#000" stroke="#000" points="265.992 -116.072 272.972 -108.101 262.545 -109.98 265.992 -116.072"/></g><g id="edge32" class="edge"><title>InputQueue-&gt;LaunchConfig</title><path fill="none" stroke="#000" d="M195.096,-363.632C199.784,-362.363 204.476,-361.132 209,-360 271.835,-344.283 344.209,-329.01 395.047,-318.741"/><polygon fill="#000" stroke="#000" points="395.805 -322.159 404.918 -316.755 394.424 -315.296 395.805 -322.159"/></g><g id="edge34" class="edge"><title>InputQueue-&gt;TooManyMessagesAlarm</title><path fill="none" stroke="#000" d="M168.417,-359.913C179.212,-350.223 191.602,-337.513 200,-324 244.587,-252.257 197.401,-199.589 261,-144 267.862,-138.002 360.354,-120.729 436.6,-107.317"/><polygon fill="#000" stroke="#000" points="437.517 -110.709 446.762 -105.535 436.308 -103.815 437.517 -110.709"/></g><g id="edge38" class="edge"><title>InputQueue-&gt;InputQueuePolicy</title><path fill="none" stroke="#000" d="M120.617,-359.831C110.644,-351.285 99.4051,-340.944 89.9048,-331.62"/><polygon fill="#000" stroke="#000" points="92.256 -329.021 82.716 -324.413 87.3 -333.965 92.256 -329.021"/></g><g id="edge42" class="edge"><title>InputQueue-&gt;InputQueuePolicy</title><path fill="none" stroke="#000" d="M132.522,-359.831C123.985,-351.048 112.733,-340.371 102.028,-330.849"/><polygon fill="#000" stroke="#000" points="104.209 -328.107 94.376 -324.163 99.603 -333.378 104.209 -328.107"/></g><g id="node18" class="node"><title>QueueURL</title><polygon fill="#d3d3d3" stroke="#d3d3d3" points="199 -36 133 -36 121 -24 121 -12 133 0 199 0 211 -12 211 -24 199 -36"/><path fill="#d3d3d3" stroke="#d3d3d3" d="M133,-36C127,-36 121,-30 121,-24"/><path fill="#d3d3d3" stroke="#d3d3d3" d="M121,-12C121,-6 127,-1.68162e-14 133,-1.58688e-14"/><path fill="#d3d3d3" stroke="#d3d3d3" d="M199,-5.44749e-15C205,-4.5001e-15 211,-6 211,-12"/><path fill="#d3d3d3" stroke="#d3d3d3" d="M211,-24C211,-30 205,-36 199,-36"/><polyline fill="none" stroke="#000" points="199 -36 133 -36"/><path fill="none" stroke="#000" d="M133,-36C127,-36 121,-30 121,-24"/><polyline fill="none" stroke="#000" points="121 -24 121 -12"/><path fill="none" stroke="#000" d="M121,-12C121,-6 127,-1.68162e-14 133,-1.58688e-14"/><polyline fill="none" stroke="#000" points="133 0 199 0"/><path fill="none" stroke="#000" d="M199,-5.44749e-15C205,-4.5001e-15 211,-6 211,-12"/><polyline fill="none" stroke="#000" points="211 -12 211 -24"/><path fill="none" stroke="#000" d="M211,-24C211,-30 205,-36 199,-36"/><text x="166" y="-14.4" font-family="Times Roman,serif" font-size="14" text-anchor="middle">QueueURL</text></g><g id="edge54" class="edge"><title>InputQueue-&gt;QueueURL</title><path fill="none" stroke="#000" d="M150.144,-359.926C156.002,-332.753 166,-279.684 166,-234 166,-234 166,-234 166,-162 166,-121.876 166,-75.4631 166,-46.4177"/><polygon fill="#000" stroke="#000" points="169.5 -46.185 166 -36.185 162.5 -46.185 169.5 -46.185"/></g><g id="node9" class="node"><title>InstanceSecurityGroup</title><polygon fill="none" stroke="#000" points="359 -468 185 -468 185 -432 359 -432 359 -468"/><text x="272" y="-446.4" font-family="Times Roman,serif" font-size="14" text-anchor="middle">InstanceSecurityGroup</text></g><g id="edge24" class="edge"><title>InstanceSecurityGroup-&gt;LaunchConfig</title><path fill="none" stroke="#000" d="M268.17,-431.934C265.067,-412.033 263.546,-380.182 280,-360 294.758,-341.898 349.309,-327.154 394.527,-317.673"/><polygon fill="#000" stroke="#000" points="395.509 -321.045 404.605 -315.613 394.107 -314.187 395.509 -321.045"/></g><g id="edge36" class="edge"><title>WorkerScaleUpPolicy-&gt;TooManyMessagesAlarm</title><path fill="none" stroke="#000" d="M546.972,-143.831C545.688,-136.131 544.162,-126.974 542.736,-118.417"/><polygon fill="#000" stroke="#000" points="546.165 -117.702 541.069 -108.413 539.261 -118.853 546.165 -117.702"/></g><g id="edge28" class="edge"><title>WorkerKeys-&gt;LaunchConfig</title><path fill="none" stroke="#000" d="M442.143,-359.831C439.892,-352.131 439.229,-342.974 440.155,-334.417"/><polygon fill="#000" stroke="#000" points="443.627 -334.893 442.072 -324.413 436.752 -333.576 443.627 -334.893"/></g><g id="edge30" class="edge"><title>WorkerKeys-&gt;LaunchConfig</title><path fill="none" stroke="#000" d="M477.857,-359.831C480.108,-352.131 480.771,-342.974 479.845,-334.417"/><polygon fill="#000" stroke="#000" points="483.248 -333.576 477.928 -324.413 476.373 -334.893 483.248 -333.576"/></g><g id="edge12" class="edge"><title>WorkerKeys-&gt;LaunchConfig</title><path fill="none" stroke="#000" d="M454.048,-359.831C453.297,-352.131 453.076,-342.974 453.385,-334.417"/><polygon fill="#000" stroke="#000" points="456.879 -334.616 454.024 -324.413 449.893 -334.17 456.879 -334.616"/></g><g id="edge14" class="edge"><title>WorkerKeys-&gt;LaunchConfig</title><path fill="none" stroke="#000" d="M465.952,-359.831C466.703,-352.131 466.924,-342.974 466.615,-334.417"/><polygon fill="#000" stroke="#000" points="470.107 -334.17 465.976 -324.413 463.121 -334.616 470.107 -334.17"/></g><g id="node13" class="node"><title>MinInstances</title><polygon fill="#d3d3d3" stroke="#d3d3d3" points="749 -540 667 -540 655 -528 655 -516 667 -504 749 -504 761 -516 761 -528 749 -540"/><path fill="#d3d3d3" stroke="#d3d3d3" d="M667,-540C661,-540 655,-534 655,-528"/><path fill="#d3d3d3" stroke="#d3d3d3" d="M655,-516C655,-510 661,-504 667,-504"/><path fill="#d3d3d3" stroke="#d3d3d3" d="M749,-504C755,-504 761,-510 761,-516"/><path fill="#d3d3d3" stroke="#d3d3d3" d="M761,-528C761,-534 755,-540 749,-540"/><polyline fill="none" stroke="#000" points="749 -540 667 -540"/><path fill="none" stroke="#000" d="M667,-540C661,-540 655,-534 655,-528"/><polyline fill="none" stroke="#000" points="655 -528 655 -516"/><path fill="none" stroke="#000" d="M655,-516C655,-510 661,-504 667,-504"/><polyline fill="none" stroke="#000" points="667 -504 749 -504"/><path fill="none" stroke="#000" d="M749,-504C755,-504 761,-510 761,-516"/><polyline fill="none" stroke="#000" points="761 -516 761 -528"/><path fill="none" stroke="#000" d="M761,-528C761,-534 755,-540 749,-540"/><text x="708" y="-518.4" font-family="Times Roman,serif" font-size="14" text-anchor="middle">MinInstances</text></g><g id="edge44" class="edge"><title>MinInstances-&gt;WorkerGroup</title><path fill="none" stroke="#000" d="M698.116,-503.984C671.238,-454.991 596.697,-319.119 564.796,-260.969"/><polygon fill="#000" stroke="#000" points="567.758 -259.093 559.88 -252.009 561.621 -262.46 567.758 -259.093"/></g><g id="node14" class="node"><title>KeyName</title><polygon fill="#d3d3d3" stroke="#d3d3d3" points="501 -540 445 -540 433 -528 433 -516 445 -504 501 -504 513 -516 513 -528 501 -540"/><path fill="#d3d3d3" stroke="#d3d3d3" d="M445,-540C439,-540 433,-534 433,-528"/><path fill="#d3d3d3" stroke="#d3d3d3" d="M433,-516C433,-510 439,-504 445,-504"/><path fill="#d3d3d3" stroke="#d3d3d3" d="M501,-504C507,-504 513,-510 513,-516"/><path fill="#d3d3d3" stroke="#d3d3d3" d="M513,-528C513,-534 507,-540 501,-540"/><polyline fill="none" stroke="#000" points="501 -540 445 -540"/><path fill="none" stroke="#000" d="M445,-540C439,-540 433,-534 433,-528"/><polyline fill="none" stroke="#000" points="433 -528 433 -516"/><path fill="none" stroke="#000" d="M433,-516C433,-510 439,-504 445,-504"/><polyline fill="none" stroke="#000" points="445 -504 501 -504"/><path fill="none" stroke="#000" d="M501,-504C507,-504 513,-510 513,-516"/><polyline fill="none" stroke="#000" points="513 -516 513 -528"/><path fill="none" stroke="#000" d="M513,-528C513,-534 507,-540 501,-540"/><text x="473" y="-518.4" font-family="Times Roman,serif" font-size="14" text-anchor="middle">KeyName</text></g><g id="edge22" class="edge"><title>KeyName-&gt;LaunchConfig</title><path fill="none" stroke="#000" d="M485.793,-503.945C505.732,-473.42 539.786,-410.049 518,-360 513.158,-348.877 504.772,-339.011 495.856,-330.854"/><polygon fill="#000" stroke="#000" points="497.846 -327.951 487.961 -324.138 493.31 -333.283 497.846 -327.951"/></g><g id="node15" class="node"><title>InstanceType</title><polygon fill="#d3d3d3" stroke="#d3d3d3" points="625 -540 543 -540 531 -528 531 -516 543 -504 625 -504 637 -516 637 -528 625 -540"/><path fill="#d3d3d3" stroke="#d3d3d3" d="M543,-540C537,-540 531,-534 531,-528"/><path fill="#d3d3d3" stroke="#d3d3d3" d="M531,-516C531,-510 537,-504 543,-504"/><path fill="#d3d3d3" stroke="#d3d3d3" d="M625,-504C631,-504 637,-510 637,-516"/><path fill="#d3d3d3" stroke="#d3d3d3" d="M637,-528C637,-534 631,-540 625,-540"/><polyline fill="none" stroke="#000" points="625 -540 543 -540"/><path fill="none" stroke="#000" d="M543,-540C537,-540 531,-534 531,-528"/><polyline fill="none" stroke="#000" points="531 -528 531 -516"/><path fill="none" stroke="#000" d="M531,-516C531,-510 537,-504 543,-504"/><polyline fill="none" stroke="#000" points="543 -504 625 -504"/><path fill="none" stroke="#000" d="M625,-504C631,-504 637,-510 637,-516"/><polyline fill="none" stroke="#000" points="637 -516 637 -528"/><path fill="none" stroke="#000" d="M637,-528C637,-534 631,-540 625,-540"/><text x="584" y="-518.4" font-family="Times Roman,serif" font-size="14" text-anchor="middle">InstanceType</text></g><g id="edge26" class="edge"><title>InstanceType-&gt;LaunchConfig</title><path fill="none" stroke="#000" d="M576.942,-503.805C569.604,-471.954 558.279,-405.19 526,-360 517.677,-348.347 506.041,-338.256 494.796,-330.054"/><polygon fill="#000" stroke="#000" points="496.539 -327.003 486.334 -324.156 492.536 -332.746 496.539 -327.003"/></g><g id="edge20" class="edge"><title>InstanceType-&gt;LaunchConfig</title><path fill="none" stroke="#000" d="M587.699,-503.805C587.604,-471.954 576.279,-405.19 544,-360 535.514,-348.119 523.584,-337.861 511.326,-329.574"/><polygon fill="#000" stroke="#000" points="513.14 -326.58 502.827 -324.156 509.378 -332.483 513.14 -326.58"/></g><g id="node16" class="node"><title>MaxInstances</title><polygon fill="#d3d3d3" stroke="#d3d3d3" points="877 -540 791 -540 779 -528 779 -516 791 -504 877 -504 889 -516 889 -528 877 -540"/><path fill="#d3d3d3" stroke="#d3d3d3" d="M791,-540C785,-540 779,-534 779,-528"/><path fill="#d3d3d3" stroke="#d3d3d3" d="M779,-516C779,-510 785,-504 791,-504"/><path fill="#d3d3d3" stroke="#d3d3d3" d="M877,-504C883,-504 889,-510 889,-516"/><path fill="#d3d3d3" stroke="#d3d3d3" d="M889,-528C889,-534 883,-540 877,-540"/><polyline fill="none" stroke="#000" points="877 -540 791 -540"/><path fill="none" stroke="#000" d="M791,-540C785,-540 779,-534 779,-528"/><polyline fill="none" stroke="#000" points="779 -528 779 -516"/><path fill="none" stroke="#000" d="M779,-516C779,-510 785,-504 791,-504"/><polyline fill="none" stroke="#000" points="791 -504 877 -504"/><path fill="none" stroke="#000" d="M877,-504C883,-504 889,-510 889,-516"/><polyline fill="none" stroke="#000" points="889 -516 889 -528"/><path fill="none" stroke="#000" d="M889,-528C889,-534 883,-540 877,-540"/><text x="834" y="-518.4" font-family="Times Roman,serif" font-size="14" text-anchor="middle">MaxInstances</text></g><g id="edge46" class="edge"><title>MaxInstances-&gt;WorkerGroup</title><path fill="none" stroke="#000" d="M816.235,-503.984C767.423,-454.486 631.165,-316.308 574.846,-259.196"/><polygon fill="#000" stroke="#000" points="577.272 -256.672 567.759 -252.009 572.288 -261.587 577.272 -256.672"/></g><g id="node22" class="node"><title>AWS::StackName</title><polygon fill="none" stroke="#000" points="167 -468 31 -468 31 -432 167 -432 167 -468"/><text x="99" y="-446.4" font-family="Times Roman,serif" font-size="14" text-anchor="middle">AWS::StackName</text></g><g id="edge10" class="edge"><title>AWS::StackName-&gt;LaunchConfig</title><path fill="none" stroke="#000" d="M135.792,-431.903C156.098,-421.709 181.655,-408.541 204,-396 230.788,-380.966 234.8,-372.18 263,-360 305.288,-341.736 355.38,-328.104 394.47,-319.105"/><polygon fill="#000" stroke="#000" points="395.687 -322.418 404.672 -316.804 394.147 -315.59 395.687 -322.418"/></g><g id="node26" class="node"><title>AWS::Region</title><polygon fill="none" stroke="#000" points="393 -396 289 -396 289 -360 393 -360 393 -396"/><text x="341" y="-374.4" font-family="Times Roman,serif" font-size="14" text-anchor="middle">AWS::Region</text></g><g id="edge16" class="edge"><title>AWS::Region-&gt;LaunchConfig</title><path fill="none" stroke="#000" d="M365.076,-359.831C379.532,-350.537 398.266,-339.121 415.305,-329.197"/><polygon fill="#000" stroke="#000" points="417.117 -332.192 424.029 -324.163 413.618 -326.129 417.117 -332.192"/></g><g id="edge18" class="edge"><title>AWS::Region-&gt;LaunchConfig</title><path fill="none" stroke="#000" d="M376.981,-359.831C392.95,-350.707 411.555,-339.539 427.145,-329.745"/><polygon fill="#000" stroke="#000" points="429.368 -332.479 435.933 -324.163 425.615 -326.57 429.368 -332.479"/></g></g></svg>